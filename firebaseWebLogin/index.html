<html>
<head>
  <title>Firebase Login</title>
  <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>

  <nav id="login_nav" class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Parish-AR CMS</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

  <nav id="user_nav" class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Parish-AR CMS</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
       
      </ul>
      <form class="form-inline my-2 my-lg-0">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                    <a id="userlink" class="nav-link" href="#">Username</a>
            </li>
            <li class="nav-item">
                <button onclick="logout()" class="btn btn-primary">Logout</button>
            </li>
        </ul>
        
      </form>
    </div>
  </nav>


  <div id="login_div" class="main-div">
    <h3>Database WebLogin</h3>
    <input type="email" placeholder="Email..." id="email_field" />
    <input type="password" placeholder="Password..." id="password_field" />

    <button onclick="login()" class ="login">Login to Account</button>
  </div>

  <div id="user_div" class="loggedin-div">

        <label>Lokalita</label> <input id="Locbox" type="text">
        <br>
        <label>Parrocca</label> <input id="Namebox" type="text">
        <br>
        <label>Kappillan</label> <input id="Kappillanbox" type="text">
        <br>
        <label>Hinijiet</label> <input id="Timebox" type="text">
        <br>
        <select id="Knisjabox">
            <option value="Knisja">Knisja</option>
            <option value="Kappella">Kappella</option>
        </select>
        <br>
        <label>Storja</label> <input id="Historybox" type="text">
        <br>
        <label>Longitude</label> <input id="Lonbox" type="text">
        <label>Latitude</label> <input id="Latbox" type="text">

        <br>
        <button id="Insbtn">INSERT</button>
        <button id="Selbtn">SELECT</button>
        <button id="Updbtn">UPDATE</button>
        <button id="Delbtn">DELETE</button>

        

  </div>
    
    <!--analytics-->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-analytics.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyByYcfFE5zlae_rIBjqHUgH3cEbHV3OlUc",
        authDomain: "parish-ar.firebaseapp.com",
        databaseURL: "https://parish-ar-default-rtdb.firebaseio.com",
        projectId: "parish-ar",
        storageBucket: "parish-ar.appspot.com",
        messagingSenderId: "519756129842",
        appId: "1:519756129842:web:6198ad8a40eb73c4c4fe2b",
        measurementId: "G-EL7ZP3NJHX"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
    </script>


  <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
  <script>
    // Initialize Firebase
    var firebaseConfig = {
      apiKey: "AIzaSyByYcfFE5zlae_rIBjqHUgH3cEbHV3OlUc",
      authDomain: "parish-ar.firebaseapp.com",
      databaseURL: "https://parish-ar-default-rtdb.firebaseio.com",
      projectId: "parish-ar",
      storageBucket: "parish-ar.appspot.com",
      appId: "1:519756129842:web:6198ad8a40eb73c4c4fe2b"
    };
    firebase.initializeApp(firebaseConfig);

  </script>
  
  
  
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyByYcfFE5zlae_rIBjqHUgH3cEbHV3OlUc",
      authDomain: "parish-ar.firebaseapp.com",
      projectId: "parish-ar",
      storageBucket: "parish-ar.appspot.com",
      messagingSenderId: "519756129842",
      appId: "1:519756129842:web:6198ad8a40eb73c4c4fe2b"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    import {getDatabase, ref, get, set, child, update, remove}
    from "https://www.gstatic.com/firebasejs/9.6.9/firebase-database.js"

    const db = getDatabase();
    var locbox = document.getElementById("Locbox");
    var namebox = document.getElementById("Namebox");
    var kappillanbox = document.getElementById("Kappillanbox");
    var timebox = document.getElementById("Timebox");
    var knisjabox = document.getElementById("Knisjabox");
    var historybox = document.getElementById("Historybox");
    var lonbox = document.getElementById("Lonbox");
    var latbox = document.getElementById("Latbox");


    var insBtn = document.getElementById("Insbtn");
    var selBtn = document.getElementById("Selbtn");
    var updBtn = document.getElementById("Updbtn");
    var delBtn = document.getElementById("Delbtn");


    function InsertData(){
        set(ref(db, "Location/"+locbox.value),{
            LocOfCh: locbox.value,
            NameOfCh: namebox.value,
            KappillanOfCh: kappillanbox.value,
            TimeOfCh: timebox.value,
            TypeOfCh: knisjabox.value,
            HistoryOfCh: historybox.value,
            LonOfCh:  lonbox.value,
            LatOfCh:  latbox.value,

        })
        .then(()=>{
            alert("data store successfully");
        })
        .catch((error)=>{
            alert("unsuccessful, error: "+error);
        });
    }

    insBtn.addEventListener('click', InsertData);

    function SelectData(){
        const dbref = ref(db);
        get(child(dbref, "Location/"+locbox.value)).then((snapshot)=>{
            if(snapshot.exists()){
                namebox.value = snapshot.val().NameOfCh;
                kappillanbox.value = snapshot.val().KappillanOfCh;
                timebox.value = snapshot.val().TimeOfCh;
                knisjabox.value = snapshot.val().TypeOfCh;
                historybox.value = snapshot.val().HistoryOfCh;
                lonbox.value = snapshot.val().LonOfCh;
                latbox.value = snapshot.val().LatOfCh;
            }else{
                alert("No Data Found");
            }
        })
        .catch((error)=>{
            alert("unsuccessful, error: "+error);
        });
    }
    selBtn.addEventListener('click', SelectData);

    function UpdateData(){
        update(ref(db, "Location/"+locbox.value),{
            NameOfCh: namebox.value,
            KappillanOfCh: kappillanbox.value,
            TimeOfCh: timebox.value,
            TypeOfCh: knisjabox.value,
            HistoryOfCh: historybox.value,
            LonOfCh:  lonbox.value,
            LatOfCh:  latbox.value,

        })
        .then(()=>{
            alert("data updated successfully");
        })
        .catch((error)=>{
            alert("unsuccessful, error: "+error);
        });
    }

    updBtn.addEventListener('click', UpdateData);

    function DeleteData(){
        remove(ref(db, "Location/"+locbox.value))
        .then(()=>{
            alert("data removed successfully");
        })
        .catch((error)=>{
            alert("unsuccessful, error: "+error);
        });
    }

    delBtn.addEventListener('click', DeleteData);

  </script>
  
  <script src="index.js"></script>


</body>
</html>
